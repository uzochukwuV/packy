# V2.5 Deployment Update - January 22, 2026

## Contract Deployment Addresses (Updated)

```
LeagueToken:      0x48Ce9cAD6130206f733E693cC789Ef56e27d994f
GameEngine:       0x93b78E4b92a7e6b52Ed229C7D592CF41Fd43F459
LiquidityPool:    0x54803f1e4aF71b0BFB40E66c2f78C8532D58Fd77
BettingPool:      0xA98052b027818d26374eB46e7FbBCeDde2e19533
SeasonPredictor:  0xE75464943564907a2fa160050Af9494EAed39607
```

## Major Changes in V2.5

### 1. **Round Duration: 15 Minutes → 3 Hours**
- **Previous**: 15-minute betting windows
- **New**: 3-hour betting windows
- **Impact**: More time for users to place bets, better for engagement
- **Files Updated**:
  - `server/web3/config.ts` - ROUND_DURATION_MS
  - `client/src/pages/Dashboard.tsx` - Betting countdown timer
  - `client/src/pages/Home.tsx` - Landing page descriptions
  - `server/web3/event-sync.ts` - Round end time calculation

### 2. **Unified LP Pool Model**
- **Protocol Fee**: 5% on all bets
- **LP Coverage**: All payouts (base + parlay bonuses) come from LP
- **LP Seeding**: 3,000 LEAGUE per round (10x increase)
- **Benefit**: Better liquidity depth, more sustainable economics

### 3. **Reduced Parlay Multipliers**
- **Previous Range**: 1.0x - 1.5x (10 matches)
- **New Range**: 1.0x - 1.25x (10 matches)
- **Progression**: Linear scaling (1.05x → 1.25x)
- **Reason**: LP safety while keeping parlays attractive

### 4. **Count-Based Parlay Tiers (NEW)**
- **Tier 1 (First 10 parlays)**: 2.5x multiplier
- **Tier 2 (11-20 parlays)**: 2.2x multiplier
- **Tier 3 (21-30 parlays)**: 1.9x multiplier
- **Tier 4 (31-40 parlays)**: 1.6x multiplier
- **Tier 5 (41+ parlays)**: 1.3x multiplier
- **Purpose**: Create FOMO mechanics, reward early bettors

### 5. **Enhanced Liquidity Pool**
- AMM-style LP shares
- Deposit/withdraw anytime
- Transparent fee distribution
- Reserve-based multiplier decay for safety

## Files Updated

### Contract Addresses
- ✅ `server/web3/config.ts`
- ✅ `client/src/contracts/addresses.ts`

### ABIs (Copied from attached_assets/arch)
- ✅ `server/web3/abis/GameEngine.json`
- ✅ `server/web3/abis/BettingPoolV2_1.json`
- ✅ `server/web3/abis/LiquidityPoolV2.json`
- ✅ `server/web3/abis/SeasonPredictorV2.json`
- ✅ `client/src/abis/Gameengine.json`
- ✅ `client/src/abis/bettingpool.json`
- ✅ `client/src/abis/LiquidityPool.json`
- ✅ `client/src/abis/SeasonPredictor.json`

### Configuration Updates
- ✅ `server/web3/config.ts` - Round duration (3 hours)
- ✅ `client/src/pages/Dashboard.tsx` - Betting timer (3 hours)
- ✅ `client/src/pages/Home.tsx` - Landing page copy (3 hours)
- ✅ `server/web3/event-sync.ts` - Round end time (3 hours)

## Testing Checklist

### Backend
- [ ] Verify contract addresses in config
- [ ] Test event listeners with new ABIs
- [ ] Confirm round sync works with 3-hour duration
- [ ] Check bet placement and points awarding
- [ ] Verify game monitor countdown (3 hours)

### Frontend
- [ ] Connect wallet and verify contract addresses
- [ ] Place a test bet
- [ ] Check betting countdown shows 3 hours
- [ ] Verify parlay multipliers display correctly
- [ ] Test leaderboard display
- [ ] Confirm points system UI updates

### Database
- [ ] Run `npm run db:push` to apply schema changes
- [ ] Verify points tables created (user_points, points_history)
- [ ] Test points awarding for bet placement
- [ ] Test points awarding for bet wins

## Migration Steps

1. **Update Environment Variables** (if needed)
   ```bash
   # .env file - verify RPC_URL is set
   RPC_URL=https://sepolia.infura.io/v3/YOUR_INFURA_KEY
   ADMIN_PRIVATE_KEY=0x...
   ```

2. **Apply Database Schema**
   ```bash
   npm run db:push
   ```

3. **Restart Server**
   ```bash
   npm run dev
   ```

4. **Clear Frontend Cache**
   - Clear browser cache
   - Hard reload (Ctrl+Shift+R)

5. **Verify Deployment**
   - Check contract interactions
   - Place test bet
   - Monitor event sync logs
   - Verify points are awarded

## Key Contract Features

### BettingPoolV2.1
- Protocol fee: 5% (500 basis points)
- Winner share: 25% (2500 basis points)
- Season pool: 2% (200 basis points)
- Bonus rates: 5% (2 matches), 10% (3 matches), 20% (4+ matches)
- Virtual liquidity multiplier: 12,000,000 (for odds dampening)

### GameEngineV2.5
- VRF timeout: 2 hours
- Callback gas limit: 2,000,000
- Request confirmations: 3
- Teams: 20
- Matches per round: 10
- Rounds per season: 36

## Notes

- **LeagueToken ABI unchanged** - No need to update
- **All old addresses deprecated** - Use only V2.5 addresses
- **Points system integrated** - Auto-awards 1pt/bet, 10pt/win
- **Leaderboard live** - Track top testnet users
- **3-hour rounds** - Better engagement, more strategic betting

## Support

If you encounter issues:
1. Check browser console for errors
2. Verify wallet is connected to Sepolia
3. Ensure sufficient LEAGUE token balance (use faucet)
4. Check server logs for event sync issues
5. Verify all contract addresses match V2.5 deployment

## Next Steps

1. **Monitor First Round**
   - Watch event sync
   - Track betting activity
   - Monitor points distribution

2. **Analytics**
   - Track round participation
   - Monitor LP utilization
   - Analyze parlay tier distribution

3. **User Feedback**
   - Gather feedback on 3-hour rounds
   - Monitor engagement metrics
   - Track leaderboard competition

---

**Deployment Date**: January 22, 2026
**Version**: V2.5
**Status**: ✅ Updated and Ready for Testing
